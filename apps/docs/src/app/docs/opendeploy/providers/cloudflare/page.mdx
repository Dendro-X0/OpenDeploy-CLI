import { DocsLayout } from "@/components/layout/docs/docs-layout"
import { ProviderCapabilities } from "@/components/docs/provider-capabilities"

export const metadata = { title: "Deploy to Cloudflare Pages" }

<DocsLayout showTableOfContents={true}>
  <article className="prose prose-gray dark:prose-invert max-w-none">

<a id="top" />

# Cloudflare Pages

Cloudflare Pages is supported for environment sync and logs/inspect flows. Deployment is not yet managed directly by the CLI.

See also: [Providers vNext Overview](/docs/opendeploy/architecture/providers-vnext)

<ProviderCapabilities provider="cloudflare" />

<a id="prerequisites" />
## Prerequisites
- Cloudflare account and a target project
- `CLOUDFLARE_API_TOKEN` set in your environment (CI recommended)

<a id="quick-start" />
## Quick start
```bash
# Open latest deployment in Inspect (dashboard)
opd logs cloudflare --open

# Sync env from local file (preview/prod)
opd env sync cloudflare --file .env --env preview --yes
```

<a id="notes" />
## Notes
- Use `--env production` for production VM/env selection in logs/env sync; otherwise previews.
- For deployments, use Cloudflare’s native workflows (project settings/CI) until CLI deploy support lands.

<a id="astro" />
## Astro (static) note
- Build locally with `astro build` → deploy via Cloudflare Pages project (Git/CI or wrangler/pages). Use `opd env sync cloudflare` to manage environment variables.
If your site builds to a custom directory, configure it in your Cloudflare Pages project.

<a id="troubleshooting" />
## Troubleshooting
- 404 on assets: confirm the publish directory in Cloudflare Pages matches the built output.
- Inspect shows an older deploy: pass `--env production` to open the production inspect URL.

</article>
</DocsLayout>
